(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{415:function(t,e,a){"use strict";a.r(e);var n=a(3),r=a(1),c=a(24),s=a.n(c),i=a(29),o=a(12),u=a(438),j=a(39),l=a(17),d=a.n(l),b=a(25),h=a(109),x=a(59),O=a.n(x),v="/api/evaluations",f=function(){var t=Object(b.a)(d.a.mark((function t(){var e,a,n=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,t.next=3,O.a.get("".concat(v,"/per_campus?page=").concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var t=Object(b.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(v,"/stats"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(b.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(v,"/users"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(b.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(v,"/stats/").concat(e));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k={users:[],evaluations:[],currentPage:1,stats:[]},w=function(t){return function(){var e=Object(b.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:n=e.sent,a({type:"CHANGE_PAGE",data:{currentPage:t,evaluations:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT":return e.data;case"CHANGE_PAGE":return Object(h.a)(Object(h.a)({},t),{},{currentPage:e.data.currentPage,evaluations:e.data.evaluations});default:return t}},E=a(432),F=a(433),P=a(434),G=a(435),_=a(436),A=function(t,e){var a=new Date(e)-new Date(t);return"".concat(Math.round(a/6e4)," minutes")},I=function(t){var e=t.evaluations;return e?Object(n.jsxs)(E.a,{size:"small",children:[Object(n.jsx)(F.a,{children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(G.a,{children:"Started at"}),Object(n.jsx)(G.a,{children:"Evaluator"}),Object(n.jsx)(G.a,{children:"Evaluation quality"}),Object(n.jsx)(G.a,{children:"Duration"}),Object(n.jsx)(G.a,{children:"Project final grade"})]})}),Object(n.jsx)(_.a,{children:e.map((function(t){return Object(n.jsxs)(P.a,{style:{backgroundColor:"".concat(t.evalGoodness<.67?"pink":"white")},children:[Object(n.jsx)(G.a,{children:new Date(t.begin_at).toLocaleString("en-FI")}),Object(n.jsx)(G.a,{children:Object(n.jsx)(i.b,{to:"/user/".concat(t.corrector.id),children:t.corrector.login})}),Object(n.jsx)(G.a,{children:100*t.evalGoodness+"%"}),Object(n.jsx)(G.a,{children:A(t.begin_at,t.filled_at)}),Object(n.jsx)(G.a,{children:t.final_mark})]},t.id)}))})]}):null},C=function(t){var e=t.stats,a=t.evaluations,r=t.currentPage,c=Object(j.b)();return a?Object(n.jsxs)("div",{children:["there's a total of ",e.total," evals from the last week, ",a.total," from Hive",Object(n.jsx)(I,{evaluations:a.data}),r>1?Object(n.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){return c(w(r-1))},children:"Previous page"}):null,r<a.last_page?Object(n.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){return c(w(r+1))},children:"Next page"}):null]}):null},D=a(178),H=a(437),N=function(){var t=Object(r.useState)({}),e=Object(D.a)(t,2),a=e[0],c=e[1],s=function(){var t=Object(b.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:a=t.sent,c(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=Object(o.f)().id;return Object(r.useEffect)((function(){s(j)}),[j]),Object.keys(a).length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(H.a,{variant:"h2",children:[" ",a.data[0].corrector.login," "]}),Object(n.jsxs)(H.a,{children:[' Average evaluation "quality" ',(100*a.averageGoodness).toFixed(2)," % "]}),Object(n.jsx)(I,{evaluations:a.data}),Object(n.jsx)(u.a,{variant:"contained",component:i.b,to:"/",color:"primary",children:"Go back"})]}):null},S=a(439),q=a(35),T=function(t){var e=t.data,a=Object.keys(e).reduce((function(t,a){return t+parseFloat(e[a]||0)}),0),r=[{name:"great",amount:e[1],percentage:e[1]?(e[1]/a*100).toFixed(2):0},{name:"ok",amount:e[.67],percentage:e[.67]?(e[.67]/a*100).toFixed(2):0},{name:"fair",amount:e[.33],percentage:e[.33]?(e[.33]/a*100).toFixed(2):0},{name:"poor",amount:e[0],percentage:e[0]?(e[0]/a*100).toFixed(2):0}];return Object(n.jsxs)(q.b,{width:500,height:300,data:r,margin:{top:20,right:30,left:20,bottom:5},children:[Object(n.jsx)(q.c,{strokeDasharray:"3 3"}),Object(n.jsx)(q.f,{dataKey:"name"}),Object(n.jsx)(q.g,{}),Object(n.jsx)(q.e,{}),Object(n.jsx)(q.d,{}),Object(n.jsx)(q.a,{dataKey:"percentage",stackId:"a",fill:"#8884d8"})]})},z=function(t){var e=t.stats;return Object.keys(e).length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(E.a,{size:"small",children:[Object(n.jsx)(F.a,{children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(G.a,{children:"Total evaluations"}),Object(n.jsx)(G.a,{children:'Average evaluation "quality"'}),Object(n.jsx)(G.a,{children:"Short eval sessions"}),Object(n.jsx)(G.a,{children:"Short evaluator feedback"}),Object(n.jsx)(G.a,{children:"Low rated evaluations"})]})}),Object(n.jsx)(_.a,{children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(G.a,{children:e.total}),Object(n.jsx)(G.a,{children:e.averageGoodness.toFixed(2)}),Object(n.jsx)(G.a,{children:e.shortEvaluations}),Object(n.jsx)(G.a,{children:e.shortFeedbackEvaluations}),Object(n.jsx)(G.a,{children:e.lowRatingEvaluations})]},"42")})]}),Object(n.jsx)("h3",{children:'Eval "quality" distribution'}),Object(n.jsx)(T,{data:e.goodnessDistribution})]}):null},J=function(){var t=Object(j.b)();Object(r.useEffect)((function(){t(function(){var t=Object(b.a)(d.a.mark((function t(e){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return a=t.sent,t.next=5,f();case 5:return n=t.sent,t.next=8,g();case 8:r=t.sent,e({type:"INIT",data:{users:r,evaluations:n,stats:a,currentPage:1}});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]);var e=Object(j.c)((function(t){return t})),a=e.evaluations,c=e.stats,s=e.currentPage;return Object(n.jsxs)(i.a,{children:[Object(n.jsx)(S.a,{position:"static",color:"default",children:Object(n.jsxs)("nav",{children:[Object(n.jsx)(u.a,{variant:"contained",color:"default",component:i.b,to:"/",onClick:function(){return t(w(1))},children:"Home"}),Object(n.jsx)(u.a,{variant:"contained",color:"default",component:i.b,to:"/stats",children:"Evaluation stats"})]})}),Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{path:"/user/:id",children:Object(n.jsx)(N,{})}),Object(n.jsxs)(o.a,{path:"/stats",children:[Object(n.jsx)("h1",{children:"Evaluation statistics"}),c&&Object(n.jsxs)(n.Fragment,{children:[" ",Object(n.jsx)("h2",{children:"All of 42 "})," ",Object(n.jsx)(z,{stats:c})," "]}),a&&Object(n.jsxs)(n.Fragment,{children:[" ",Object(n.jsx)("h2",{children:"Hive "})," ",Object(n.jsx)(z,{stats:a})," "]})]}),Object(n.jsxs)(o.a,{path:"/",children:[Object(n.jsx)("h1",{children:"Recent evaluations at Hive"}),a&&Object(n.jsx)(C,{stats:c,evaluations:a,currentPage:s})]})]})]})},K=a(55),L=a(177),R=Object(K.c)(y,Object(K.a)(L.a));e.default=R;s.a.render(Object(n.jsx)(j.a,{store:R,children:Object(n.jsx)(J,{})}),document.getElementById("root"))}},[[415,1,2]]]);
//# sourceMappingURL=main.4d1a7c48.chunk.js.map